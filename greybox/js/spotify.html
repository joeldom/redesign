
<!DOCTYPE html><html lang="en"><head><title>Spotify</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=1.0, minimum-scale=1.0, maximum-scale=1.0"><link rel="canonical" href="https://open.spotify.com/album/3tsXyEbUQehXPaRFCS8K1n"><style type="text/css">
        body,html{padding:0;margin:0}body,html,html a{color:#fff}body,button{font-family:Circular,Helvetica,Arial,sans-serif}.name,.name a,.truncate,body{overflow:hidden}.info>*,.name,.name a,.truncate{white-space:nowrap;text-overflow:ellipsis}.logo,.play-button{background-repeat:no-repeat}.get-link-button:focus,.play-button:focus{outline:0}.get-link-button,.overlay{transition:opacity .25s ease-in-out}@font-face{font-family:Circular;src:url(https://sp-bootstrap.global.ssl.fastly.net/5.2.0/fonts/circular-light.woff2) format('woff2'),url(https://sp-bootstrap.global.ssl.fastly.net/5.2.0/fonts/circular-light.woff) format('woff');font-weight:300;font-style:normal}body,button,div,html,p,span{margin:0;padding:0;line-height:1em}html *{text-decoration:none;box-sizing:border-box}html a:hover{color:#fff;text-decoration:underline}.btn,.btn:hover{text-decoration:none}body{font-weight:300;font-size:14px;width:100%;height:100%;scrollbar-base-color:#181818;scrollbar-face-color:#404040;scrollbar-3dlight-color:#181818;scrollbar-highlight-color:#404040;scrollbar-track-color:#181818;scrollbar-arrow-color:#404040;scrollbar-shadow-color:#181818;scrollbar-darkshadow-color:#181818}.container{position:relative;margin:0 auto;background-color:#282828;min-width:200px}.container.track-view .progress{display:block}.container.track-view .context-name{display:none!important}.container.track-view .skip-next,.container.track-view .skip-previous{display:none}.main{height:80px;position:relative;border:none}.cover-small,.info,.play-button{position:absolute}.info{top:14px;left:90px;right:40px}.info>*{overflow-x:hidden}.info>div{margin-bottom:3px}.cover-small{left:0;top:0;bottom:0;width:78px;background-size:cover;background-position:center center}.play-button{width:64px;height:64px;left:7px;top:7px;background-color:transparent;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTIyNiAxNDgxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0wIDEzOTRWODdDMCA0Ni4zIDEzLjMgMTkuOCA0MCA3LjUgNjYuNy00LjggOTguNy4zIDEzNiAyM2wxMDM0IDYzNGMzNy4zIDIyLjcgNTYgNTAuMyA1NiA4M3MtMTguNyA2MC4zLTU2IDgzTDEzNiAxNDU4Yy0zNy4zIDIyLjctNjkuMyAyNy44LTk2IDE1LjUtMjYuNy0xMi4zLTQwLTM4LjgtNDAtNzkuNXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=);background-size:24px;background-position:58% 50%;border-radius:500px;border:1px solid #a0a0a0;cursor:pointer}.context-name,.progress{position:absolute;left:90px}.play-button.playing{background-position:center;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTI2MCAxNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0yNTIgMEgxMjZDOTEuMyAwIDYxLjcgMTIuMyAzNyAzNyAxMi4zIDYxLjcgMCA5MS4zIDAgMTI2djEyNjBjMCAzNC43IDEyLjMgNjQuMyAzNyA4OSAyNC43IDI0LjcgNTQuMyAzNyA4OSAzN2gxMjZjMzQuNyAwIDY0LjMtMTIuMyA4OS0zNyAyNC43LTI0LjcgMzctNTQuMyAzNy04OVYxMjZjMC0zNC43LTEyLjMtNjQuMy0zNy04OS0yNC43LTI0LjctNTQuMy0zNy04OS0zN3ptODgyIDBoLTEyNmMtMzQuNyAwLTY0LjMgMTIuMy04OSAzNy0yNC43IDI0LjctMzcgNTQuMy0zNyA4OXYxMjYwYzAgMzQuNyAxMi4zIDY0LjMgMzcgODkgMjQuNyAyNC43IDU0LjMgMzcgODkgMzdoMTI2YzM0LjcgMCA2NC4zLTEyLjMgODktMzcgMjQuNy0yNC43IDM3LTU0LjMgMzctODlWMTI2YzAtMzQuNy0xMi4zLTY0LjMtMzctODktMjQuNy0yNC43LTU0LjMtMzctODktMzd6IiBmaWxsPSIjZmZmIi8+PC9zdmc+)}.logo{position:absolute;display:block;right:10px;bottom:8px;width:20px;height:20px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNjcuNSAxNjcuNSI+PHBhdGggc3R5bGU9ImZpbGw6IzFFRDc2MCIgZD0iTTgzLjcgMEMzNy41IDAgMCAzNy41IDAgODMuN2MwIDQ2LjMgMzcuNSA4My43IDgzLjcgODMuNyA0Ni4zIDAgODMuNy0zNy41IDgzLjctODMuN1MxMzAgMCA4My43IDB6TTEyMiAxMjAuOGMtMS40IDIuNS00LjYgMy4yLTcgMS43LTE5LjgtMTItNDQuNS0xNC43LTczLjctOC0yLjguNS01LjYtMS4yLTYuMi00LS4yLTIuOCAxLjUtNS42IDQtNi4yIDMyLTcuMyA1OS42LTQuMiA4MS42IDkuMyAyLjYgMS41IDMuNCA0LjcgMS44IDcuMnpNMTMyLjUgOThjLTIgMy02IDQtOSAyLjItMjIuNS0xNC01Ni44LTE4LTgzLjQtOS44LTMuMiAxLTctMS04LTQuM3MxLTcgNC42LThjMzAuNC05IDY4LjItNC41IDk0IDExIDMgMiA0IDYgMiA5em0xLTIzLjhjLTI3LTE2LTcxLjYtMTcuNS05Ny40LTkuNy00IDEuMy04LjItMS05LjUtNS4yLTEuMy00IDEtOC41IDUuMi05LjggMjkuNi05IDc4LjgtNy4yIDEwOS44IDExLjIgMy43IDIuMiA1IDcgMi43IDEwLjctMiAzLjgtNyA1LTEwLjYgMi44eiIvPjwvc3ZnPg==)}.get-link-button{opacity:0;position:absolute;top:10px;right:10px;background:0 0;border:0;cursor:pointer;color:#a0a0a0}.get-link-button:hover{color:#fff}.get-link{font-size:13px;color:#a0a0a0}.get-link label{display:inline-block;margin:5px}.get-link input{border-radius:2px;border:1px solid transparent;background:#282828;padding:4px 10px;color:#a0a0a0;font-size:10px;width:180px;min-width:100px}.get-link input:focus{border:1px solid #a0a0a0;outline:0}.get-link p{margin:8px 0}@media screen and (max-height:279px){.get-link{font-size:12px}.get-link label{margin:2px}.get-link p{margin:2px 0;padding:0}}.name,.name a{color:#fff}.context-name,.creator,.creator a{white-space:nowrap;color:#a0a0a0;overflow:hidden;text-overflow:ellipsis}.creator .artist:not(:first-child):before{content:', '}#progress-container.playing .progress{display:block!important}#progress-container.playing .context-name{display:none!important}.progress{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:none;bottom:10px;right:34px;height:12px}.skip-next,.skip-previous{width:7px;height:8px;background-repeat:no-repeat;cursor:pointer}.context-name{display:block;right:70px;bottom:11px;font-size:12px;line-height:12px}.skip-previous{float:left;color:#a0a0a0;margin-right:4px;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTI2MCAxNTAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0yNTIgODY3djUxN2MwIDMyLTExLjMgNTkuNS0zNCA4Mi41cy01MCAzNC41LTgyIDM0LjVoLTIwYy0zMiAwLTU5LjMtMTEuNS04Mi0zNC41LTIyLjctMjMtMzQtNTAuNS0zNC04Mi41VjExNmMwLTMyIDExLjMtNTkuMyAzNC04MkM1Ni43IDExLjMgODQgMCAxMTYgMGgyMGMzMiAwIDU5LjMgMTEuMyA4MiAzNCAyMi43IDIyLjcgMzQgNTAgMzQgODJ2NTI4bDg4Ni02MDZjMzMuMy0yMi43IDYyLTI3LjggODYtMTUuNXMzNiAzOC44IDM2IDc5LjV2MTMwN2MwIDQwLjctMTIgNjcuMi0zNiA3OS41LTI0IDEyLjMtNTIuNyA3LjItODYtMTUuNUwyNTIgODY3eiIgZmlsbD0iI2EwYTBhMCIvPjwvc3ZnPg==)}.progress-time,.skip-next{float:right;color:#a0a0a0;margin-left:4px}.skip-next{background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTI2MCAxNTAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMDA4IDg2N3Y1MTdjMCAzMiAxMS4zIDU5LjUgMzQgODIuNXM1MCAzNC41IDgyIDM0LjVoMjBjMzIgMCA1OS4zLTExLjUgODItMzQuNSAyMi43LTIzIDM0LTUwLjUgMzQtODIuNVYxMTZjMC0zMi0xMS4zLTU5LjMtMzQtODItMjIuNy0yMi43LTUwLTM0LTgyLTM0aC0yMGMtMzIgMC01OS4zIDExLjMtODIgMzQtMjIuNyAyMi43LTM0IDUwLTM0IDgydjUyOEwxMjIgMzhDODguNyAxNS4zIDYwIDEwLjIgMzYgMjIuNVMwIDYxLjMgMCAxMDJ2MTMwN2MwIDQwLjcgMTIgNjcuMiAzNiA3OS41IDI0IDEyLjMgNTIuNyA3LjIgODYtMTUuNWw4ODYtNjA2eiIgZmlsbD0iI2EwYTBhMCIvPjwvc3ZnPg==)}.progress-bar{margin-top:2px;height:4px;border-radius:2px;overflow:hidden;background-color:#404040}.progress-bar>span{display:block;height:100%;position:relative;overflow:hidden;background-color:#1ed760;border-radius:2px}.progress-time{width:30px;text-align:left;font-size:10px;line-height:10px}.btn,.overlay,.track-row-number{text-align:center}.btn,.upsell{font-size:14px}.extra{width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;user-drag:none;position:relative;border:1px solid #282828;border-top:0}.extra .cover,.extra svg{position:absolute;top:0;left:0;width:100%;height:100%;background-size:cover;background-position:center center}.extra:before{width:100%;padding-top:100%;content:"";display:block}.btn{display:inline-block;background-color:transparent;color:#fff;line-height:1.5;border-radius:500px;padding:4px 14px 2px;border:2px solid #fff;letter-spacing:1.2px;text-transform:uppercase;white-space:normal;margin-bottom:10px;cursor:pointer}.btn.btn-primary{background-color:#1db954;border:2px solid #1db954}.btn.btn-primary:hover{background-color:#1ed760;border:2px solid #1ed760}.upsell p{margin:6px;padding:0}@media screen and (max-width:400px){.upsell p{font-size:13px;margin-left:20px;margin-right:20px}.upsell .btn{font-size:10.5px;line-height:2;padding-left:9px;padding-right:9px}}.container.tracklist-view .play-button{background-color:rgba(0,0,0,.7);position:relative;z-index:10;-webkit-transform:scale(.6);transform:scale(.6);border:1px solid #a0a0a0}.container.tracklist-view .play-button::before{-webkit-transform:scale(1.3);transform:scale(1.3)}.container.track-view .cover-small{display:none}.no-touch .container.tracklist-view .play-button:hover,.no-touch .play-button:hover{border-color:#1ed760}.no-touch .container:hover .get-link-button{opacity:1}.no-touch .container:hover .progress{display:block}.no-touch .container:hover .context-name{display:none}@media screen and (max-height:279px){.play-button{background-color:rgba(0,0,0,.7);position:relative;z-index:10;-webkit-transform:scale(.6);transform:scale(.6);border:1px solid #a0a0a0}.play-button::before{-webkit-transform:scale(1.3);transform:scale(1.3)}.container{width:100%!important}.container.track-view .cover-small{display:block}.extra{display:none}}.hide{display:none}::-webkit-scrollbar{width:10px;background:#181818}::-webkit-scrollbar-button{display:none}::-webkit-scrollbar-track{background:0 0}::-webkit-scrollbar-thumb{border-radius:100px;background:#404040;border:2px solid #181818}.overlay{z-index:10000;position:absolute;top:0;left:0;right:0;bottom:0;padding:20px;background-color:rgba(0,0,0,.9);font-size:14px;visibility:hidden;opacity:0}.overlay.show{opacity:1;visibility:visible}.overlay .unavailable-track{padding:6px 30px}.overlay .unavailable-track a{margin-top:4px}.overlay .overlay-close{position:absolute;top:10px;right:10px;width:10px;height:10px;cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTQxNiAxNDE2IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMzgxIDEyMTJjMjMuMyAyMy4zIDM1IDUxLjUgMzUgODQuNXMtMTEuNyA2MS4yLTM1IDg0LjVjLTIzLjMgMjMuMy01MS41IDM1LTg0LjUgMzVzLTYxLjItMTEuNy04NC41LTM1TDcwOCA4NzdsLTUwNCA1MDRjLTIzLjMgMjMuMy01MS41IDM1LTg0LjUgMzVzLTYxLjItMTEuNy04NC41LTM1Yy0yMy4zLTIzLjMtMzUtNTEuNS0zNS04NC41czExLjctNjEuMiAzNS04NC41bDUwNC01MDRMMzUgMjA0Yy0yMy4zLTIzLjMtMzUtNTEuNS0zNS04NC41UzExLjcgNTguMyAzNSAzNUM1Ny43IDExLjcgODUuNyAwIDExOSAwYzM0IDAgNjIuMyAxMS43IDg1IDM1bDUwNCA1MDQgNTA0LTUwNGMyMi43LTIzLjMgNTEtMzUgODUtMzUgMzMuMyAwIDYxLjMgMTEuNyA4NCAzNSAyMy4zIDIzLjMgMzUgNTEuNSAzNSA4NC41cy0xMS43IDYxLjItMzUgODQuNUw4NzcgNzA4bDUwNCA1MDR6IiBmaWxsPSIjZmZmIi8+PC9zdmc+);background-repeat:no-repeat}@media screen and (max-height:279px){.overlay{padding:4px}}.cover-art-container,.track-list{position:absolute;top:0;bottom:0;left:0;right:0;list-style-type:none;margin:0;padding:0;overflow-y:auto;background-color:#181818;border-top:solid 1px #000}.cover-art-container{overflow:hidden;padding:10% 0}.cover-art-container>div{position:relative;width:250%;left:-75%;top:10%;height:100%}.cover-art-container>div>div{width:33.3333333%;display:inline-block;height:100%;position:relative}.cover-art-container .cover{position:absolute;top:2%;width:96%;height:96%;background-size:cover;background-position:center center;left:2%}.track-row{position:relative;height:45px;color:#a0a0a0;background-color:#181818;border-bottom:1px solid #282828;cursor:pointer;transition:background-color .4s}.track-row-duration,.track-row-info,.track-row-number{position:absolute;top:0;bottom:0}.track-row:last-child{border-bottom:none}.theme-white .extra,.theme-white .main{border-color:#a0a0a0}.track-row.playing *{color:#1ed760!important}.track-row:hover{background-color:#282828;transition:background-color .1s}.track-row-number{left:0;width:45px;line-height:45px}.track-row-info{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;left:45px;right:45px;text-align:left;color:#fff;padding-top:9px}.track-row-info.track-row-no-artist{padding-top:0;line-height:45px}.track-row-info .track-artist{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:3px;font-size:12px;color:#a0a0a0}.track-row-duration{right:10px;width:45px;text-align:right;line-height:45px}.theme-white{scrollbar-base-color:#fff;scrollbar-face-color:#a0a0a0;scrollbar-3dlight-color:#fff;scrollbar-highlight-color:#a0a0a0;scrollbar-track-color:#fff;scrollbar-arrow-color:#a0a0a0;scrollbar-shadow-color:#fff;scrollbar-darkshadow-color:#fff}.theme-white .main{background-color:#FFF}.theme-white .extra,.theme-white .progress-bar{background-color:#181818}@media screen and (max-height:279px){.theme-white .extra{border-top:0;border-right:1px solid #a0a0a0}}.theme-white .play-button{background-color:#181818;border-color:#181818}.theme-white .name,.theme-white .name *,.theme-white .play-button::before{color:#181818}.theme-white .creator .creator *{color:#282828}.theme-white .cover-art-container,.theme-white .track-list{border-top:none;border-color:#a0a0a0;background-color:#fff}.theme-white .track-row{background-color:#fff;border-color:#f7f7f7}.theme-white .track-row-info{color:#181818}.theme-white ::-webkit-scrollbar{width:10px;background:#fff}.theme-white ::-webkit-scrollbar-button{display:none}.theme-white ::-webkit-scrollbar-track{background:0 0}.theme-white ::-webkit-scrollbar-thumb{border-radius:100px;background:#a0a0a0;border:2px solid #fff}
    </style><!-- Google Analytics --><script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-5784146-31', 'auto');
        ga('send', 'pageview');
    </script><!-- End Google Analytics --></head><body class=" theme-white"><div id ="container" class="container tracklist-view"><div class="main"><a href="https://www.spotify.com/?utm_source=open-spb&utm_medium=spb-logo" target="_blank" class="logo"></a><div class="cover-small" style="background-image: url('https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa')"></div><button id="get-link-button" class="get-link-button">&lt;/&gt;</button><button id="play-button" class="play-button"></button><div class="info"><div id="track-name" class="name"><a href="https://open.spotify.com/track/0B1Iqqq8wVoXM5R5glHQES" target="_blank">Prayers / Triangles</a></div><div id="track-artists" class="creator"><span class="artist"><a href="https://open.spotify.com/artist/6Ghvu1VvMGScGpOUJBAHNH" target="_blank">Deftones</a></span></div></div><div id="progress-container"><div class="progress"><div id="skip-previous" class="skip-previous"></div><div id="progress-time" class="progress-time">3:37</div><div id="skip-next" class="skip-next"></div><div id="progress-bar-outer" class="progress-bar"><span id="progress-bar" style="width: 0%"></span></div></div><div class="context-name">
                                                    Gore
                                            </div></div></div><div class="extra" id="extra"><ul class="track-list"><li class="track-row"
            data-position="1"
            data-name="Prayers / Triangles"
            data-artists="Deftones"
            data-duration-ms="217920"
            data-uri="spotify:track:0B1Iqqq8wVoXM5R5glHQES"
            data-preview="https://p.scdn.co/mp3-preview/0d29d3ad619d616a32371789e2542f6d39636611"            data-web-player-url="https://play.spotify.com/track/0B1Iqqq8wVoXM5R5glHQES"
                                            data-size-640="https://i.scdn.co/image/badcad8d7a9f219115a0e97efb53a3fb1eadc178"
                                                        data-size-300="https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa"
                                                        data-size-64="https://i.scdn.co/image/ae326061f4a93687beb15810af551c075b4fc8b5"
                            ><div class="track-row-number">1</div><div class="track-row-info track-row-no-artist">
                Prayers / Triangles
                            </div><div class="track-row-duration">3:37</div></li><li class="track-row"
            data-position="2"
            data-name="Acid Hologram"
            data-artists="Deftones"
            data-duration-ms="245826"
            data-uri="spotify:track:7t2JgdeMxaw7cRhJbtUcm2"
            data-preview="https://p.scdn.co/mp3-preview/44fa5220c95b90cfc9d2fc4fd79d3b960765d89a"            data-web-player-url="https://play.spotify.com/track/7t2JgdeMxaw7cRhJbtUcm2"
                                            data-size-640="https://i.scdn.co/image/badcad8d7a9f219115a0e97efb53a3fb1eadc178"
                                                        data-size-300="https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa"
                                                        data-size-64="https://i.scdn.co/image/ae326061f4a93687beb15810af551c075b4fc8b5"
                            ><div class="track-row-number">2</div><div class="track-row-info track-row-no-artist">
                Acid Hologram
                            </div><div class="track-row-duration">4:05</div></li><li class="track-row"
            data-position="3"
            data-name="Doomed User"
            data-artists="Deftones"
            data-duration-ms="266866"
            data-uri="spotify:track:6eMGp0jmEbFxy42ZnyzsLJ"
            data-preview="https://p.scdn.co/mp3-preview/94eafb37248be27a6e566f73ba244baaa23e9a6e"            data-web-player-url="https://play.spotify.com/track/6eMGp0jmEbFxy42ZnyzsLJ"
                                            data-size-640="https://i.scdn.co/image/badcad8d7a9f219115a0e97efb53a3fb1eadc178"
                                                        data-size-300="https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa"
                                                        data-size-64="https://i.scdn.co/image/ae326061f4a93687beb15810af551c075b4fc8b5"
                            ><div class="track-row-number">3</div><div class="track-row-info track-row-no-artist">
                Doomed User
                            </div><div class="track-row-duration">4:26</div></li><li class="track-row"
            data-position="4"
            data-name="Geometric Headdress"
            data-artists="Deftones"
            data-duration-ms="209053"
            data-uri="spotify:track:45VAWfiWf1aX6yKMhb7nDp"
            data-preview="https://p.scdn.co/mp3-preview/335ff0025757bcd54e19787a5374eaafe42722df"            data-web-player-url="https://play.spotify.com/track/45VAWfiWf1aX6yKMhb7nDp"
                                            data-size-640="https://i.scdn.co/image/badcad8d7a9f219115a0e97efb53a3fb1eadc178"
                                                        data-size-300="https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa"
                                                        data-size-64="https://i.scdn.co/image/ae326061f4a93687beb15810af551c075b4fc8b5"
                            ><div class="track-row-number">4</div><div class="track-row-info track-row-no-artist">
                Geometric Headdress
                            </div><div class="track-row-duration">3:29</div></li><li class="track-row"
            data-position="5"
            data-name="Hearts / Wires"
            data-artists="Deftones"
            data-duration-ms="320546"
            data-uri="spotify:track:1SeMnyEb5dwCBLU3QUC0K2"
            data-preview="https://p.scdn.co/mp3-preview/1221c0088c33e168f567146ca820285b23bc72e0"            data-web-player-url="https://play.spotify.com/track/1SeMnyEb5dwCBLU3QUC0K2"
                                            data-size-640="https://i.scdn.co/image/badcad8d7a9f219115a0e97efb53a3fb1eadc178"
                                                        data-size-300="https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa"
                                                        data-size-64="https://i.scdn.co/image/ae326061f4a93687beb15810af551c075b4fc8b5"
                            ><div class="track-row-number">5</div><div class="track-row-info track-row-no-artist">
                Hearts / Wires
                            </div><div class="track-row-duration">5:20</div></li><li class="track-row"
            data-position="6"
            data-name="Pittura Infamante"
            data-artists="Deftones"
            data-duration-ms="243600"
            data-uri="spotify:track:5WhRD87Q9qx388WdiIdQ0b"
            data-preview="https://p.scdn.co/mp3-preview/e3179f1d11cb4b345c1f944a86b14223137f9ccf"            data-web-player-url="https://play.spotify.com/track/5WhRD87Q9qx388WdiIdQ0b"
                                            data-size-640="https://i.scdn.co/image/badcad8d7a9f219115a0e97efb53a3fb1eadc178"
                                                        data-size-300="https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa"
                                                        data-size-64="https://i.scdn.co/image/ae326061f4a93687beb15810af551c075b4fc8b5"
                            ><div class="track-row-number">6</div><div class="track-row-info track-row-no-artist">
                Pittura Infamante
                            </div><div class="track-row-duration">4:03</div></li><li class="track-row"
            data-position="7"
            data-name="Xenon"
            data-artists="Deftones"
            data-duration-ms="197160"
            data-uri="spotify:track:3DjG5WXxqUyYBdeHdQZb80"
            data-preview="https://p.scdn.co/mp3-preview/2eca2a8ec0e0e3e9c0f26fe8782421bbff87b05f"            data-web-player-url="https://play.spotify.com/track/3DjG5WXxqUyYBdeHdQZb80"
                                            data-size-640="https://i.scdn.co/image/badcad8d7a9f219115a0e97efb53a3fb1eadc178"
                                                        data-size-300="https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa"
                                                        data-size-64="https://i.scdn.co/image/ae326061f4a93687beb15810af551c075b4fc8b5"
                            ><div class="track-row-number">7</div><div class="track-row-info track-row-no-artist">
                Xenon
                            </div><div class="track-row-duration">3:17</div></li><li class="track-row"
            data-position="8"
            data-name="(L)MIRL"
            data-artists="Deftones"
            data-duration-ms="302413"
            data-uri="spotify:track:4hYNZvsCnAOZP0lADhpmgC"
            data-preview="https://p.scdn.co/mp3-preview/f65091913a66903bea70786bdb0a51dea74ed366"            data-web-player-url="https://play.spotify.com/track/4hYNZvsCnAOZP0lADhpmgC"
                                            data-size-640="https://i.scdn.co/image/badcad8d7a9f219115a0e97efb53a3fb1eadc178"
                                                        data-size-300="https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa"
                                                        data-size-64="https://i.scdn.co/image/ae326061f4a93687beb15810af551c075b4fc8b5"
                            ><div class="track-row-number">8</div><div class="track-row-info track-row-no-artist">
                (L)MIRL
                            </div><div class="track-row-duration">5:02</div></li><li class="track-row"
            data-position="9"
            data-name="Gore"
            data-artists="Deftones"
            data-duration-ms="299160"
            data-uri="spotify:track:0u1vgJ4L1Fb3JQUxpNV1He"
            data-preview="https://p.scdn.co/mp3-preview/154dfdfe9a3321b64b116bbc17401bf0e94e1cab"            data-web-player-url="https://play.spotify.com/track/0u1vgJ4L1Fb3JQUxpNV1He"
                                            data-size-640="https://i.scdn.co/image/badcad8d7a9f219115a0e97efb53a3fb1eadc178"
                                                        data-size-300="https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa"
                                                        data-size-64="https://i.scdn.co/image/ae326061f4a93687beb15810af551c075b4fc8b5"
                            ><div class="track-row-number">9</div><div class="track-row-info track-row-no-artist">
                Gore
                            </div><div class="track-row-duration">4:59</div></li><li class="track-row"
            data-position="10"
            data-name="Phantom Bride"
            data-artists="Deftones"
            data-duration-ms="293053"
            data-uri="spotify:track:33qrQEXQJg4uk6k8fZgoOa"
            data-preview="https://p.scdn.co/mp3-preview/4a0239fac77a5ba2ef2327cd580e5cb8d77f08ee"            data-web-player-url="https://play.spotify.com/track/33qrQEXQJg4uk6k8fZgoOa"
                                            data-size-640="https://i.scdn.co/image/badcad8d7a9f219115a0e97efb53a3fb1eadc178"
                                                        data-size-300="https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa"
                                                        data-size-64="https://i.scdn.co/image/ae326061f4a93687beb15810af551c075b4fc8b5"
                            ><div class="track-row-number">10</div><div class="track-row-info track-row-no-artist">
                Phantom Bride
                            </div><div class="track-row-duration">4:53</div></li><li class="track-row"
            data-position="11"
            data-name="Rubicon"
            data-artists="Deftones"
            data-duration-ms="297840"
            data-uri="spotify:track:7GmxcKBzgT3LdOQJ07dYPa"
            data-preview="https://p.scdn.co/mp3-preview/a84b28b5e450e38ba3651ceac3d206c0e09a059f"            data-web-player-url="https://play.spotify.com/track/7GmxcKBzgT3LdOQJ07dYPa"
                                            data-size-640="https://i.scdn.co/image/badcad8d7a9f219115a0e97efb53a3fb1eadc178"
                                                        data-size-300="https://i.scdn.co/image/39a43ed489b52629fa02e21ccb4366e93d538daa"
                                                        data-size-64="https://i.scdn.co/image/ae326061f4a93687beb15810af551c075b4fc8b5"
                            ><div class="track-row-number">11</div><div class="track-row-info track-row-no-artist">
                Rubicon
                            </div><div class="track-row-duration">4:57</div></li></ul></div><div id="overlay" class="overlay"><div class="overlay-close"></div><div id="unavailable-track" class="unavailable-track hide"><p>The 30 second audio preview for this track is not available in your country</p><a id="js-unavailable-track-get-spotify-button" class="btn btn-primary" href="https://www.spotify.com/signup/?creation_flow=embed&amp;utm_source=open-embed" target="_blank">Get Spotify</a>&nbsp;
            <button id="js-unavailable-track-open-client-button" class="btn">Open Spotify</button></div><div id="upsell" class="upsell hide"><p class="upsell-description">To play the full track, you&#039;ll need the Spotify app.</p><a id="js-upsell-get-spotify-button" class="btn btn-primary" href="https://www.spotify.com/signup/?creation_flow=embed&amp;utm_source=open-embed" target="_blank">Get Spotify</a>&nbsp;
            <button id="js-upsell-open-client-button" class="btn">Open Spotify</button></div><div id="get-link" class="get-link hide"><label>
            Embed code:
            <input onClick="this.select();" type="text" value="https://open.spotify.com/embed/album/3tsXyEbUQehXPaRFCS8K1n"></label><label>
            Get the link:
            <input onClick="this.select();" type="text" value="https://open.spotify.com/album/3tsXyEbUQehXPaRFCS8K1n"></label><p>By embedding you agree to the <a href="https://developer.spotify.com/technologies/widgets/terms-of-use/" target="_top">Terms</a></p></div></div></div><span id="config" class="hide"
          data-preview="https://p.scdn.co/mp3-preview/0d29d3ad619d616a32371789e2542f6d39636611"
          data-uri="spotify:track:0B1Iqqq8wVoXM5R5glHQES"
          data-context="spotify:album:3tsXyEbUQehXPaRFCS8K1n"></span><script>
        window.SpotifyEnvironment = {
        autoplay: JSON.parse("false"),
        context: {
            uri: "spotify:album:3tsXyEbUQehXPaRFCS8K1n",
                                                type: "album"
        },
        strings: {
            'Download Spotify': "Download Spotify",
            'Play on Spotify': "Play on Spotify",
            'View on Spotify': "View on Spotify",
            'Follow on Spotify': "Follow on Spotify"
        },
        platform: "desktop",
        isMobile: false,
        usesWebPlayer: false,
        isSpotified: false,
        downloadLink: "https://www.spotify.com/signup/?creation_flow=embed&utm_source=open-embed"
    };
</script><script type="text/javascript">
        !function t(e,n,i){function o(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){"use strict";e.exports={getCookie:function(t){return t&&this.hasCookie(t)?decodeURIComponent(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+decodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},hasCookie:function(t){return new RegExp("(?:^|;\\s*)"+decodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},setCookie:function(t,e,n,i,o,r){document.cookie=t+"="+encodeURIComponent(e)+(r?";expires="+r:";expires=Fri, 01 Jan 2038 17:14:16 GMT")+(n?";path="+n:"")+(i?";domain="+i:"")+(o?";secure":"")},deleteCookie:function(t,e,n){document.cookie=t+"=;expires=Fri, 01 Jan 1970 17:14:16 GMT"+(e?";path="+e:"")+(n?";domain="+n:"")},expires:function(t){var e=new Date,n=e.getTime();return n+=1e3*t,e.setTime(n),e.toUTCString()}}},{}],2:[function(t,e,n){function i(t){return"undefined"!=typeof NodeList&&t instanceof NodeList?[].slice.call(t):[].concat(t)}function o(t,e,n){e=i(e);for(var o=0;o<e.length;o++)t.attachEvent&&!t.addEventListener?t.attachEvent(e[o],n):t.addEventListener(e[o],n,!1)}n.addListener=o,n.setText="textContent"in document.body?function(t,e){t=i(t);for(var n=0;n<t.length;n++)t[n].textContent=e}:function(t,e){t=i(t);for(var n=0;n<t.length;n++)t[n].innerText=e};var r,s,u,a=function(t,e){for(var n=(t||"").replace(/^\s+|\s+$/g,"").split(/\s+/),i=[],o={},r=0,s=n.length;s>r;r++){var u=n[r];o[u]||u===e||(i.push(u),o[u]=1)}return i};"classList"in document.body?(r=function(t,e){t=i(t);for(var n=0;n<t.length;n++)t[n].classList.add(e);return t},s=function(t,e){t=i(t);for(var n=0;n<t.length;n++)t[n].classList.remove(e);return t},u=function(t,e){return t.classList.contains(e)}):(r=function(t,e){t=i(t);for(var n=0;n<t.length;n++)t[n].className=a(t[n].className+" "+e).join(" ");return t},s=function(t,e){t=i(t);for(var n=0;n<t.length;n++)t[n].className=a(t[n].className,e).join(" ")},u=function(t,e){for(var n=a(t.className),i=n.length;i--;)if(n[i]===e)return!0;return!1}),n.addClass=r,n.removeClass=s,n.hasClass=u},{}],3:[function(t,e,n){e.exports=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}},{}],4:[function(t,e,n){var i=function(t,e,n,i){try{ga("send","event",t,e,n,i)}catch(o){}};e.exports=function(t){return{loadPage:function(){var e=document.body.getAttribute("data-abtest");i(t,"Load page",e?e:"",{nonInteraction:!0})},showModal:function(e){i(t,"Show modal",e)},dismissModal:function(e){i(t,"Dismiss modal",e)},showUpsellModal:function(e){i(t,"Show upsell modal",e)},dismissUpsellModal:function(e){i(t,"Dismiss upsell modal",e)},goToWww:function(e){i(t,"Go to WWW",e)},goToSignupWww:function(e){i(t,"Go to signup in WWW",e)},goToSignupWebPlayer:function(e){i(t,"Go to signup in Web Player",e)},goToDownloadWww:function(e){i(t,"Go to download in WWW",e)},goToDownloadAppStore:function(e){i(t,"Go to download in App Store",e)},play30sPreview:function(e){i(t,"Play 30s preview",e)},playInDesktopApp:function(e){i(t,"Play in desktop app",e)},playInMobileApp:function(e){i(t,"Play in mobile app",e)},playInWebPlayer:function(e){i(t,"Play in Web Player",e)}}}},{}],5:[function(t,e,n){var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),o=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.clearTimeout}(),r=function(t){function e(){n?(t(),r=i(e)):o(r)}var n=!1,r=null;return{subscribe:function(){n||(n=!0,r=i(e))},unsubscribe:function(){n=!1,o(r)}}};e.exports.raf=i,e.exports.rafCancel=o,e.exports.RafHandler=r},{}],6:[function(t,e,n){function i(t){this.autoplay=t.autoplay,this.context=t.context||{},this.platform=t.platform,this.strings=t.strings||{},this.isMobile=t.isMobile,this.isChromebook=window.hasOwnProperty("navigator")&&-1!==window.navigator.userAgent.indexOf("CrOS "),this.isTouchDevice=!!("ontouchstart"in window||window.hasOwnProperty("navigator")&&window.navigator.msMaxTouchPoints),this.usesWebPlayer=t.usesWebPlayer,this.downloadLink=t.downloadLink,this.webPlayerUrl="https://play.spotify.com/"+this.context.uri.split(":").slice(1,this.context.uri.length).join("/"),this.topDomain="."+document.domain.split(".").slice(-2).join("."),this.urlParams=this.getQueryParams(),this.remoteDebug=void 0!==this.urlParams.remoteDebug&&0!==this.urlParams.remoteDebug,this.remotePort=parseInt(this.urlParams.remotePort)||1080,this.testAutomation="1"===this.urlParams.testAutomation}var o=t("../common/cookie.js"),r="is_spotified";i.prototype.setHasSpotify=function(t){return t?o.setCookie(r,"yes","/",this.topDomain):o.deleteCookie(r,"/",this.topDomain),this},i.prototype.hasSpotify=function(){return"yes"===o.getCookie(r)},i.prototype.getQueryParams=function(){for(var t=location.search?location.search.substr(1).split("&"):[],e={},n=0;n<t.length;n++){var i=t[n].split("=");e[i[0]]=i[1]?decodeURIComponent(i[1]):void 0}return e},i.prototype.getString=function(t){return this.strings[t]||t},i.prototype.getPlatformLink=function(){return this.downloadLink},i.prototype.getContextURI=function(){return this.context.uri},i.prototype.setContextURI=function(t){this.context.uri=t},i.prototype.getTrackURI=function(){return this.context.track},i.prototype.getContextType=function(){return this.context.type},i.prototype.getReferrer=function(){return document.referrer?document.referrer.split("/")[2]:""},e.exports=i},{"../common/cookie.js":1}],7:[function(t,e,n){var i=t("./pubsub/pubsub"),o=t("./pubsub/pubsub-events");e.exports={_type:null,init:function(){i.subscribe(o.USER.OPEN_CLIENT_REQUEST,function(t){Spotify.Env.isMobile?Spotify.GAEvents.playInMobileApp(t):Spotify.GAEvents.playInDesktopApp(t)}),i.subscribe(o.USER.OPEN_WP_REQUEST,function(t){Spotify.GAEvents.playInWebPlayer(t)}),i.subscribe(o.USER.DOWNLOAD_REQUEST,function(t){Spotify.Env.isMobile?Spotify.GAEvents.goToDownloadAppStore(t):Spotify.GAEvents.goToDownloadWww(t)}),i.subscribe(o.USER.PLAY_REQUEST,function(){"preview"===this._type?Spotify.GAEvents.play30sPreview("play-button"):"remote"===this._type?Spotify.GAEvents.playInDesktopApp("play-button"):"web-player"===this._type?Spotify.GAEvents.playInWebPlayer("play-button"):"mobile-app"===this._type&&Spotify.GAEvents.playInMobileApp("play-button")}.bind(this)),i.subscribe(o.MAIN.UPSELL,function(){Spotify.GAEvents.showModal("upsell")}),i.subscribe(o.MAIN.DISMISS_UPSELL,function(){Spotify.GAEvents.dismissModal("upsell")})},setPlayerType:function(t){this._type=t}}},{"./pubsub/pubsub":17,"./pubsub/pubsub-events":16}],8:[function(t,e,n){var i=function(t){var e={};e.position=+t.getAttribute("data-position"),e.name=t.getAttribute("data-name"),e.artists=t.getAttribute("data-artists"),e.durationMs=+t.getAttribute("data-duration-ms"),e.uri=t.getAttribute("data-uri"),e.preview=t.getAttribute("data-preview"),e.webPlayerUrl=t.getAttribute("data-web-player-url");for(var n=[],i=t.attributes,o=0;o<i.length;o++)if(0===i[o].name.indexOf("data-size-")){var r=+i[o].name.replace("data-size-","");n.push({width:r,url:i[o].value})}return e.images=n,e},o=null;e.exports={containsTrack:function(t){return!!document.querySelector('li[data-uri="'+t+'"]')},getTrackInformation:function(t){var e=document.querySelector('li[data-uri="'+t+'"]');return e?i(e):null},getTrackInformationFromPosition:function(t){var e=document.querySelector('li[data-position="'+t+'"]');return i(e)},getLength:function(){return o||(o=document.getElementsByClassName("track-row").length),o}}},{}],9:[function(t,e,n){window.Spotify=window.Spotify||{},Spotify.GAEvents=t("../common/ga-events")("SPB"),Spotify.GAEvents.loadPage();var i=t("../common/cookie"),o=t("./../common/spotifyenv");Spotify.Env=new o(window.SpotifyEnvironment);var r=t("./ui/ui"),s=t("./pubsub/pubsub"),u=t("./pubsub/pubsub-events"),a=t("./helpers/tracklist"),c=t("./ga"),l=t("./playback/initializer"),p=document.getElementById("config")||{getAttribute:function(){return""}},f={uri:p.getAttribute("data-uri"),context:p.getAttribute("data-context"),previewUrl:p.getAttribute("data-preview")},h="is_spotified",_=function(t){for(var e={},n=t.substr(1).split("&"),i=0;i<n.length;i++){var o=n[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]||"")}return e},d=_(location.search);r.init("click",d.view),r.adjustToViewport(),window.addEventListener("resize",function(){r.adjustToViewport()}),c.init();var b=null,v=!1;l(Spotify.Env).then(function(t){b=t;var e=null;c.setPlayerType(t.getType()),s.subscribe(u.USER.PLAY_REQUEST,function(e){if("preview"!==t.getType()||f.previewUrl){if(e){var n=f.context.indexOf("artist")>0?e.uri:f.context;t.load(e.uri,n,e.preview,e.webPlayerUrl)}t.playPause()}else s.publish(u.MAIN.UNAVAILABLE_TRACK)}),s.subscribe(u.USER.CHANGE_POSITION_REQUEST,function(t){b.seek(t)}),s.subscribe(u.USER.SKIP_PREV_REQUEST,function(){var n,i=t.getPosition();if(n=2500>=i&&e.position>1?a.getTrackInformationFromPosition(+e.position-1):e,"preview"!==t.getType()||n.preview){var o=t.isPlaying(),r=f.context.indexOf("artist")>0?n.uri:f.context;t.load(n.uri,r,n.preview,n.webPlayerUrl),s.publish(u.MAIN.LOAD,n),e=n,o&&t.playPause()}else s.publish(u.MAIN.UNAVAILABLE_TRACK)}),s.subscribe(u.USER.SKIP_NEXT_REQUEST,function(){if(e||(e=a.getTrackInformationFromPosition(1)),e&&e.position<a.getLength()){var n=a.getTrackInformationFromPosition(+e.position+1);if("preview"!==t.getType()||n.preview){var i=t.isPlaying(),o=f.context.indexOf("artist")>0?n.uri:f.context;t.load(n.uri,o,n.preview,n.webPlayerUrl),e=n,i&&t.playPause()}else s.publish(u.MAIN.UNAVAILABLE_TRACK)}}),s.subscribe(u.USER.DOWNLOAD_REQUEST,function(){i.deleteCookie(h,"/",Spotify.Env.topDomain)}),s.subscribe(u.PLAYER.PAUSE,function(t){var e=a.getTrackInformation(t);s.publish(u.MAIN.PAUSE,e)}),s.subscribe(u.PLAYER.PROGRESS,function(t,e,n){s.publish(u.MAIN.PROGRESS,t,e,n),"preview"===b.getType()&&e>10&&!v?(s.publish(u.MAIN.UPSELL,t),v=!0):e>99&&(v=!1)}),s.subscribe(u.USER.OPEN_CLIENT_REQUEST,function(){b.pause(),i.setCookie(h,"yes","/",Spotify.Env.topDomain),window.parent!==window?window.parent.location=f.context:window.location=f.context}),s.subscribe(u.USER.OPEN_WP_REQUEST,function(){b.pause(),i.deleteCookie(h,"/",Spotify.Env.topDomain)}),s.subscribe(u.PLAYER.PLAY,function(t){e=a.getTrackInformation(t),e&&s.publish(u.MAIN.PLAY,e)}),s.subscribe(u.PLAYER.LOAD,function(t){e=a.getTrackInformation(t),e&&s.publish(u.MAIN.LOAD,e)});var n=f.context.indexOf("artist")>0?f.uri:f.context;t.load(f.uri,n,f.previewUrl,Spotify.Env.webPlayerUrl),"ontouchstart"in document.documentElement||document.documentElement.classList.add("no-touch")})},{"../common/cookie":1,"../common/ga-events":4,"./../common/spotifyenv":6,"./ga":7,"./helpers/tracklist":8,"./playback/initializer":10,"./pubsub/pubsub":17,"./pubsub/pubsub-events":16,"./ui/ui":23}],10:[function(t,e,n){var i=t("../pubsub/pubsub"),o=t("../pubsub/pubsub-events"),r=t("es6-promise").Promise,s=t("spotify-remote"),u=function(e){var n;switch(e){case"mobileApp":n=t("../playback/strategies/mobile-app");break;case"preview":n=t("../playback/strategies/preview");break;case"remote":n=t("../playback/strategies/remote");break;case"webPlayer":n=t("../playback/strategies/web-player");break;default:throw new Error("Playback strategy not defined: "+e)}return n.apply(this,Array.prototype.splice.call(arguments,1))};e.exports=function(t){return new r(function(e){if(t.urlParams.playback)switch(t.urlParams.playback){case"preview":e(u("preview"));break;case"webplayer":e(u("webPlayer"));break;case"mobileapp":e(u("mobileApp"))}else if(t.isMobile&&t.hasSpotify())e(u("mobileApp"));else if(t.isMobile)e(u("preview"));else if(t.isChromebook&&t.usesWebPlayer)e(u("webPlayer"));else if(t.isChromebook)e(u("preview"));else{var n=new r(function(t,e){var n=new XMLHttpRequest;n.onload=function(){var e=JSON.parse(n.responseText);t(e.t)},n.onerror=function(){e(n.responseText)},n.open("GET","/token"),n.send()});n.then(function(n){var r=new s({token:n,pollClient:!1,retryConnect:!1,reconnectOnLogout:!0,debug:!1,port:1080});r.connect().then(function(n){var s="closed";n&&(s=n.playing?"playing":"paused"),i.publish(o.MAIN.REMOTE_CONTROL_CONNECTED,s),e(u("remote",t,r,n))})["catch"](function(){e(t.usesWebPlayer?u("webPlayer"):u("preview"))})})["catch"](function(){e(u("preview"))})}})}},{"../playback/strategies/mobile-app":12,"../playback/strategies/preview":13,"../playback/strategies/remote":14,"../playback/strategies/web-player":15,"../pubsub/pubsub":17,"../pubsub/pubsub-events":16,"es6-promise":24,"spotify-remote":26}],11:[function(t,e,n){e.exports={getType:function(){},load:function(){},playPause:function(){},pause:function(){},seek:function(){},isPlaying:function(){return!1},getPosition:function(){return 0}}},{}],12:[function(t,e,n){var i=t("./base"),o=t("../../../common/extend"),r=t("../../pubsub/pubsub"),s=t("../../pubsub/pubsub-events");e.exports=function(){var t=null;return o(i,{getType:function(){return"mobile-app"},load:function(e,n){t=n,r.publish(s.PLAYER.LOAD,t)},playPause:function(){window.parent!==window?window.parent.location=t:window.location=t}})}},{"../../../common/extend":3,"../../pubsub/pubsub":17,"../../pubsub/pubsub-events":16,"./base":11}],13:[function(t,e,n){var i=t("./base"),o=t("../../../common/extend"),r=t("../../pubsub/pubsub"),s=t("../../pubsub/pubsub-events"),u=t("../../../common/raf").raf;e.exports=function(){var t="preview",e=null,n=new Audio,a=null;n.addEventListener("pause",function(){r.publish(s.PLAYER.PAUSE,e)}),n.addEventListener("playing",function(){r.publish(s.PLAYER.PLAY,e)}),n.addEventListener("ended",function(){r.publish(s.PLAYER.END,e)});var c=function(){if(!n.paused){var t=100*n.currentTime/n.duration||0;100>t&&(r.publish(s.PLAYER.PROGRESS,e,t,Math.floor(1e3*n.currentTime)),u(c))}};return o(i,{getType:function(){return t},load:function(t,n,i){e=t,a=i,r.publish(s.PLAYER.LOAD,t)},playPause:function(){n.src!==a&&(n.src=a),n.paused?(n.play(),u(c)):n.pause()},pause:function(){n.pause()},isPlaying:function(){return!n.paused},getPosition:function(){return Math.floor(1e3*n.currentTime)}})}},{"../../../common/extend":3,"../../../common/raf":5,"../../pubsub/pubsub":17,"../../pubsub/pubsub-events":16,"./base":11}],14:[function(t,e,n){var i=t("./base"),o=t("../../../common/extend"),r=t("spotify-remote");r.Promise=t("es6-promise").Promise;var s=t("../../helpers/tracklist"),u=t("../../pubsub/pubsub"),a=t("../../pubsub/pubsub-events");e.exports=function(t,e,n){var c=!0,l=e,p=n,f=null,h=null,_=null,d=null,b=null,v=function(e){return t.context.uri.indexOf(":track:")>0?t.context.uri===e:s.containsTrack(e)},m=function(t){if(p=t,t&&t.track){if(!v(t.track.track_resource.uri))return void u.publish(a.PLAYER.PAUSE,t.track.track_resource.uri);if(t.track.track_resource.uri!==h&&(u.publish(a.PLAYER.PAUSE,h),h=t.track.track_resource.uri),d=t.track.length,b=t.playing_position,t.playing){var e=100*b/d,n=1e3*b;u.publish(a.PLAYER.PLAY,t.track.track_resource.uri),u.publish(a.PLAYER.PROGRESS,h,e,n),f||(f=window.setInterval(function(){b+=1;var t=100*b/d,e=1e3*b;u.publish(a.PLAYER.PROGRESS,h,t,e)},1e3))}else f&&(window.clearInterval(f),f=null),u.publish(a.PLAYER.PAUSE,t.track.track_resource.uri)}};return l.on(r.Event.STATUS_CHANGE,m),o(i,{getType:function(){return"remote"},load:function(t,e){c&&p&&p.playing&&v(p.track.track_resource.uri)?(h=p.track.track_resource.uri,m(p)):h=t,c=!1,_=e,u.publish(a.PLAYER.LOAD,t)},playPause:function(){p&&p.track&&p.track.track_resource&&p.track.track_resource.uri===h?l.toggle():(f&&(window.clearInterval(f),f=null,u.publish(a.PLAYER.PROGRESS,h,0,d)),u.publish(a.PLAYER.PAUSE,h),l.play(_,h))},isPlaying:function(){return p&&p.playing},getPosition:function(){return 1e3*b}})}},{"../../../common/extend":3,"../../helpers/tracklist":8,"../../pubsub/pubsub":17,"../../pubsub/pubsub-events":16,"./base":11,"es6-promise":24,"spotify-remote":26}],15:[function(t,e,n){var i=t("./base"),o=t("../../../common/extend"),r=t("../../pubsub/pubsub"),s=t("../../pubsub/pubsub-events");e.exports=function(){var t=null;return o(i,{getType:function(){return"web-player"},load:function(e,n,i,o){t=o,r.publish(s.PLAYER.LOAD,e)},playPause:function(){window.open(t,"_blank")}})}},{"../../../common/extend":3,"../../pubsub/pubsub":17,"../../pubsub/pubsub-events":16,"./base":11}],16:[function(t,e,n){e.exports={USER:{CHANGE_POSITION_REQUEST:"user:change-position-request",DOWNLOAD_REQUEST:"user:download-request",GET_LINK_REQUEST:"user:get-link-request",OPEN_CLIENT_REQUEST:"user:open-client-request",OPEN_WP_REQUEST:"user:open-wp-request",PLAY_REQUEST:"user:play-request",SKIP_PREV_REQUEST:"user:skip-prev-request",SKIP_NEXT_REQUEST:"user:skip-next-request"},MAIN:{LOAD:"main:load",PAUSE:"main:pause",PLAY:"main:play",END:"main:end",PROGRESS:"main:progress",REMOTE_CONTROL_CONNECTED:"main:remote-control-connnected",UNAVAILABLE_TRACK:"main:unavailable-track",UPSELL:"main:upsell",DISMISS_UPSELL:"main:dismiss-upsell"},PLAYER:{LOAD:"player:load",PAUSE:"player:pause",PLAY:"player:play",END:"player:end",PROGRESS:"player:progress"}}},{}],17:[function(t,e,n){var i={};e.exports={publish:function(t){if(!t)throw new Error("Tried to publish to an invalid topic");var e=Array.prototype.slice.call(arguments,1);i[t]&&i[t].forEach(function(t){t.apply(this,e)})},subscribe:function(t,e){if(!t)throw new Error("Tried to subscribe to an invalid topic");return i[t]||(i[t]=[]),i[t].push(e),[t,e]},unsubscribe:function(t){var e=t[0];i[e]&&i[e].forEach(function(n){n===t[1]&&i[e].splice(n,1)})},dispose:function(){i={}}}},{}],18:[function(t,e,n){e.exports=function(){function t(){if(o=document.getElementById("extra"),i=document.getElementById("cover")){for(var t="data-size-",e=0,n=i.attributes,r=n.length;r>e;e++){var s=n[e];if(0===s.nodeName.indexOf(t)){var c=+s.nodeName.replace(t,"");a.push({size:c,src:s.value})}}a.sort(function(t,e){return e.size-t.size}),u=!0}}function e(t){i.style.backgroundImage='url("'+t+'")'}function n(){if(u||t(),0!==a.length){var n=o.clientWidth;if(n>s||!s){for(var i=a[0],c=1;c<a.length&&a[c].size>=n;c++)i=a[c];i!==r&&(e(i.src),r=i),s=n}}}var i,o,r,s,u=!1,a=[];return{onResize:n}}()},{}],19:[function(t,e,n){var i=t("../pubsub/pubsub"),o=t("../pubsub/pubsub-events"),r=t("../helpers/tracklist");e.exports={init:function(t,e){this._clickEvent=t,this._document=e||document,this._coverView=this._document.querySelector(".cover-art-container"),this._attachEvents(),this._stack={prev:null,current:null,next:null}},_attachEvents:function(){var t=this._coverView.querySelector(".cover-prev");t.addEventListener(this._clickEvent,function(){i.publish(o.USER.SKIP_PREV_REQUEST)});var e=this._coverView.querySelector(".cover-next");e.addEventListener(this._clickEvent,function(){i.publish(o.USER.SKIP_NEXT_REQUEST)});var n=this._coverView.querySelector(".cover-current");n.addEventListener(this._clickEvent,function(){i.publish(o.USER.PLAY_REQUEST)}),i.subscribe(o.MAIN.PLAY,this._updateCovers.bind(this)),i.subscribe(o.MAIN.LOAD,this._updateCovers.bind(this))},_updateCovers:function(t){var e=t.position;this._stack.current=t,e>1?this._stack.prev=r.getTrackInformationFromPosition(e-1):this._stack.prev=null,e<r.getLength()-1?this._stack.next=r.getTrackInformationFromPosition(e+1):this._stack.next=null;for(var n in this._stack)if(this._stack.hasOwnProperty(n)){var i=this._coverView.querySelector(".cover-"+n);if(null===this._stack[n])i.style.visibility="hidden",i.style.backgroundImage=null;else{i.style.visibility="initial";for(var o=i.offsetWidth,s=this._stack[n].images.length?this._stack[n].images[0]:null,u=1;u<this._stack[n].images.length;u++){var a=this._stack[n].images[u];if(!(a.width>=o))break;s=a}i.style.backgroundImage=s?"url("+s.url+")":"none"}}}}},{"../helpers/tracklist":8,"../pubsub/pubsub":17,"../pubsub/pubsub-events":16}],20:[function(t,e,n){var i=t("../pubsub/pubsub"),o=t("../pubsub/pubsub-events"),r=t("../../common/dom");e.exports={overlayElement:null,displayedElement:null,init:function(t){this._clickEvent=t,this.overlayElement=document.getElementById("overlay"),this._unavailableTrackDownloadButton=document.getElementById("js-unavailable-track-get-spotify-button"),this._upsellDownloadButton=document.getElementById("js-upsell-get-spotify-button"),this._unavailableTrackOpenWebPlayerButton=document.getElementById("js-unavailable-track-open-web-player-button"),this._upsellOpenWebPlayerButton=document.getElementById("js-upsell-open-web-player-button"),this._unavailableTrackOpenClientButton=document.getElementById("js-unavailable-track-open-client-button"),this._upsellOpenClientButton=document.getElementById("js-upsell-open-client-button");var e=this.overlayElement.querySelector(".overlay-close");e.addEventListener(t,function(){i.publish(o.MAIN.DISMISS_UPSELL),this._hide()}.bind(this)),this._attachHandlers()},_attachHandlers:function(){this._unavailableTrackDownloadButton&&this._unavailableTrackDownloadButton.addEventListener(this._clickEvent,function(){i.publish(o.USER.DOWNLOAD_REQUEST,"unavailable-track"),this._hide()}.bind(this)),this._upsellDownloadButton&&this._upsellDownloadButton.addEventListener(this._clickEvent,function(){i.publish(o.USER.DOWNLOAD_REQUEST,"upsell"),this._hide()}.bind(this)),this._unavailableTrackOpenWebPlayerButton&&this._unavailableTrackOpenWebPlayerButton.addEventListener(this._clickEvent,function(){i.publish(o.USER.OPEN_WP_REQUEST,"unavailable-track"),this._hide()}.bind(this)),this._upsellOpenWebPlayerButton&&this._upsellOpenWebPlayerButton.addEventListener(this._clickEvent,function(){i.publish(o.USER.OPEN_WP_REQUEST,"upsell"),this._hide()}.bind(this)),this._unavailableTrackOpenClientButton&&this._unavailableTrackOpenClientButton.addEventListener(this._clickEvent,function(){i.publish(o.USER.OPEN_CLIENT_REQUEST,"unavailable-track"),this._hide()}.bind(this)),this._upsellOpenClientButton&&this._upsellOpenClientButton.addEventListener(this._clickEvent,function(){i.publish(o.USER.OPEN_CLIENT_REQUEST,"upsell"),this._hide()}.bind(this)),i.subscribe(o.USER.GET_LINK_REQUEST,function(){this._show("get-link")}.bind(this)),i.subscribe(o.MAIN.UNAVAILABLE_TRACK,function(){this._show("unavailable-track")}.bind(this)),i.subscribe(o.MAIN.UPSELL,function(){this._show("upsell")}.bind(this))},_show:function(t){this.displayedElement||(this.displayedElement=document.getElementById(t),r.removeClass(this.displayedElement,"hide"),r.addClass(this.overlayElement,"show"))},_hide:function(){r.removeClass(this.overlayElement,"show"),r.addClass(this.displayedElement,"hide"),this.displayedElement=null},isActive:function(){return null!==this.displayedElement}}},{"../../common/dom":2,"../pubsub/pubsub":17,"../pubsub/pubsub-events":16}],21:[function(t,e,n){var i=t("../pubsub/pubsub"),o=t("../pubsub/pubsub-events");e.exports={init:function(t,e){this._clickEvent=t||"click",this._document=e||document,this._playButton=this._document.getElementById("play-button"),this._getLinkButton=this._document.getElementById("get-link-button"),this._trackName=this._document.getElementById("track-name"),this._trackArtists=this._document.getElementById("track-artists"),this._progressContainer=this._document.getElementById("progress-container"),this._progressBar=this._document.getElementById("progress-bar"),this._progressBarOuter=this._document.getElementById("progress-bar-outer"),this._progressTime=this._document.getElementById("progress-time"),this._controlPrevious=this._document.getElementById("skip-previous"),this._controlNext=this._document.getElementById("skip-next"),this._attachHandlers()},_attachHandlers:function(){this._addSkipPreviousClickHandler(function(){i.publish(o.USER.SKIP_PREV_REQUEST)}),this._addSkipNextClickHandler(function(){i.publish(o.USER.SKIP_NEXT_REQUEST)}),this._addProgressBarClickHandler(function(t){i.publish(o.USER.CHANGE_POSITION_REQUEST,t)}),this._addPlayButtonClickHandler(function(){i.publish(o.USER.PLAY_REQUEST)}),this._addGetLinkButtonClickHandler(function(){i.publish(o.USER.GET_LINK_REQUEST)}),i.subscribe(o.MAIN.PLAY,function(t){this._setTrackName(t.name),this._setTrackArtists(t.artists),this._setPlayButtonPlaying()}.bind(this)),i.subscribe(o.MAIN.LOAD,function(t){this._setTrackName(t.name),this._setTrackArtists(t.artists),this._setProgressPosition(0),this._setProgressTime(0)}.bind(this)),i.subscribe(o.MAIN.PAUSE,function(){this._setPlayButtonPaused()}.bind(this)),i.subscribe(o.MAIN.PROGRESS,function(t,e,n){this._setProgressPosition(e),this._setProgressTime(n)}.bind(this))},_addPlayButtonClickHandler:function(t){this._playButton.addEventListener(this._clickEvent,t)},_addGetLinkButtonClickHandler:function(t){this._getLinkButton.addEventListener(this._clickEvent,t)},_addProgressBarClickHandler:function(t){this._progressBarOuter.addEventListener(this._clickEvent,function(e){var n=e.offsetX/this._progressBarOuter.clientWidth;t(n)}.bind(this))},_addSkipPreviousClickHandler:function(t){this._controlPrevious.addEventListener(this._clickEvent,t)},_addSkipNextClickHandler:function(t){this._controlNext.addEventListener(this._clickEvent,t)},_setPlayButtonPlaying:function(){this._playButton.classList.add("playing"),this._progressContainer.classList.add("playing")},_setPlayButtonPaused:function(){this._playButton.classList.remove("playing"),this._progressContainer.classList.remove("playing")},_setTrackName:function(t){this._trackName.innerHTML=t},_setTrackArtists:function(t){this._trackArtists.innerHTML=t},_setProgressPosition:function(t){this._progressBar.style.width=t+"%"},_setProgressTime:function(t){var e=Math.floor(t/6e4),n=Math.floor(t/1e3)-60*e;10>n&&(n="0"+n),this._progressTime.innerHTML=e+":"+n}}},{"../pubsub/pubsub":17,"../pubsub/pubsub-events":16}],22:[function(t,e,n){var i=t("../pubsub/pubsub"),o=t("../pubsub/pubsub-events"),r=t("../helpers/tracklist"),s=t("../../common/dom");e.exports={init:function(t,e){this._clickEvent=t,this._document=e||document,this._trackRows=this._document.getElementsByClassName("track-row"),this._attachHandlers()},_attachHandlers:function(){i.subscribe(o.MAIN.PAUSE,this._setTrackPaused.bind(this)),i.subscribe(o.MAIN.PLAY,this._setTrackPlaying.bind(this)),this._addTrackRowClickHandler()},_addTrackRowClickHandler:function(){this._document.addEventListener(this._clickEvent,function(t){for(var e=t.target,n={};e.parentNode;){if(s.hasClass(e,"track-row")){n=r.getTrackInformation(e.getAttribute("data-uri")),i.publish(o.USER.PLAY_REQUEST,n);break}e=e.parentNode}})},_setTrackPlaying:function(t){var e=this._document.querySelector('li[data-uri="'+t.uri+'"]');if(e){var n=this._document.querySelector("li.playing");n&&n!==e&&s.removeClass(n,"playing"),s.addClass(e,"playing")}},_setTrackPaused:function(){for(var t=0;t<this._trackRows.length;t++)s.removeClass(this._trackRows[t],"playing")}}},{"../../common/dom":2,"../helpers/tracklist":8,"../pubsub/pubsub":17,"../pubsub/pubsub-events":16}],23:[function(t,e,n){e.exports={CoverArt:t("./cover-art"),Overlay:t("./overlay"),Playback:t("./playback"),TracklistView:t("./tracklistview"),CoverView:t("./coverview"),init:function(t){this._container=document.getElementById("container"),this.Playback.init(t),this.Overlay.init(t),document.querySelector(".cover-art-container")?this.CoverView.init(t):this.TracklistView.init(t)},adjustToViewport:function(){window.innerWidth>window.innerHeight-80?this._container.style.width=window.innerHeight-80+"px":this._container.style.width="100%",this.CoverArt.onResize()}}},{"./cover-art":18,"./coverview":19,"./overlay":20,"./playback":21,"./tracklistview":22}],24:[function(t,e,n){(function(n,i){(function(){"use strict";function o(t){return"function"==typeof t||"object"==typeof t&&null!==t}function r(t){return"function"==typeof t}function s(t){j=t}function u(t){X=t}function a(){return function(){n.nextTick(h)}}function c(){return function(){Y(h)}}function l(){var t=0,e=new $(h),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function p(){var t=new MessageChannel;return t.port1.onmessage=h,function(){t.port2.postMessage(0)}}function f(){return function(){setTimeout(h,1)}}function h(){for(var t=0;V>t;t+=2){var e=et[t],n=et[t+1];e(n),et[t]=void 0,et[t+1]=void 0}V=0}function _(){try{var e=t,n=e("vertx");return Y=n.runOnLoop||n.runOnContext,c()}catch(i){return f()}}function d(t,e){var n=this,i=n._state;if(i===rt&&!t||i===st&&!e)return this;var o=new this.constructor(v),r=n._result;if(i){var s=arguments[i-1];X(function(){I(i,o,s,r)})}else C(n,o,t,e);return o}function b(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(v);return T(n,t),n}function v(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function E(t){try{return t.then}catch(e){return ut.error=e,ut}}function g(t,e,n,i){try{t.call(e,n,i)}catch(o){return o}}function w(t,e,n){X(function(t){var i=!1,o=g(n,e,function(n){i||(i=!0,e!==n?T(t,n):S(t,n))},function(e){i||(i=!0,O(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&o&&(i=!0,O(t,o))},t)}function k(t,e){e._state===rt?S(t,e._result):e._state===st?O(t,e._result):C(e,void 0,function(e){T(t,e)},function(e){O(t,e)})}function P(t,e,n){e.constructor===t.constructor&&n===nt&&constructor.resolve===it?k(t,e):n===ut?O(t,ut.error):void 0===n?S(t,e):r(n)?w(t,e,n):S(t,e)}function T(t,e){t===e?O(t,m()):o(e)?P(t,e,E(e)):S(t,e)}function A(t){t._onerror&&t._onerror(t._result),L(t)}function S(t,e){t._state===ot&&(t._result=e,t._state=rt,0!==t._subscribers.length&&X(L,t))}function O(t,e){t._state===ot&&(t._state=st,t._result=e,X(A,t))}function C(t,e,n,i){var o=t._subscribers,r=o.length;t._onerror=null,o[r]=e,o[r+rt]=n,o[r+st]=i,0===r&&t._state&&X(L,t)}function L(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,o,r=t._result,s=0;s<e.length;s+=3)i=e[s],o=e[s+n],i?I(n,i,o,r):o(r);t._subscribers.length=0}}function R(){this.error=null}function N(t,e){try{return t(e)}catch(n){return at.error=n,at}}function I(t,e,n,i){var o,s,u,a,c=r(n);if(c){if(o=N(n,i),o===at?(a=!0,s=o.error,o=null):u=!0,e===o)return void O(e,y())}else o=i,u=!0;e._state!==ot||(c&&u?T(e,o):a?O(e,s):t===rt?S(e,o):t===st&&O(e,o))}function U(t,e){try{e(function(e){T(t,e)},function(e){O(t,e)})}catch(n){O(t,n)}}function x(t){return new _t(this,t).promise}function D(t){function e(t){T(o,t)}function n(t){O(o,t)}var i=this,o=new i(v);if(!K(t))return O(o,new TypeError("You must pass an array to race.")),o;for(var r=t.length,s=0;o._state===ot&&r>s;s++)C(i.resolve(t[s]),void 0,e,n);return o}function B(t){var e=this,n=new e(v);return O(n,t),n}function M(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(t){this._id=ft++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==t&&("function"!=typeof t&&M(),this instanceof G?U(this,t):H())}function q(t,e){this._instanceConstructor=t,this.promise=new t(v),Array.isArray(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):O(this.promise,this._validationError())}function W(){var t;if("undefined"!=typeof i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment");
}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=ht)}var Q;Q=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Y,j,F,K=Q,V=0,X=function(t,e){et[V]=t,et[V+1]=e,V+=2,2===V&&(j?j(h):F())},z="undefined"!=typeof window?window:void 0,J=z||{},$=J.MutationObserver||J.WebKitMutationObserver,Z="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),tt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,et=new Array(1e3);F=Z?a():$?l():tt?p():void 0===z&&"function"==typeof t?_():f();var nt=d,it=b,ot=void 0,rt=1,st=2,ut=new R,at=new R,ct=x,lt=D,pt=B,ft=0,ht=G;G.all=ct,G.race=lt,G.resolve=it,G.reject=pt,G._setScheduler=s,G._setAsap=u,G._asap=X,G.prototype={constructor:G,then:nt,"catch":function(t){return this.then(null,t)}};var _t=q;q.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},q.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===ot&&t>n;n++)this._eachEntry(e[n],n)},q.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===it){var o=E(t);if(o===nt&&t._state!==ot)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===ht){var r=new n(v);P(r,t,o),this._willSettleAt(r,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(i(t),e)},q.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===ot&&(this._remaining--,t===st?O(i,n):this._result[e]=n),0===this._remaining&&S(i,this._result)},q.prototype._willSettleAt=function(t,e){var n=this;C(t,void 0,function(t){n._settledAt(rt,e,t)},function(t){n._settledAt(st,e,t)})};var dt=W,bt={Promise:ht,polyfill:dt};"function"==typeof define&&define.amd?define(function(){return bt}):"undefined"!=typeof e&&e.exports?e.exports=bt:"undefined"!=typeof this&&(this.ES6Promise=bt),dt()}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:25}],25:[function(t,e,n){function i(){l=!1,u.length?c=u.concat(c):p=-1,c.length&&o()}function o(){if(!l){var t=setTimeout(i);l=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,l=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function s(){}var u,a=e.exports={},c=[],l=!1,p=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new r(t,e)),1!==c.length||l||setTimeout(o,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],26:[function(t,e,n){(function(n){"use strict";function i(t,e){return!this instanceof i?new i(t,e):(r.call(this),t=t||{},this._win=e||window,this._protocol=t.protocol||this._win.location.protocol,this._csrf="",t.debug?this._delayedConnect=new i.Promise(function(t){this._win.startRemote=t}.bind(this)):this._delayedConnect=Promise.resolve(),t.port&&t.debug?this._startPort=this._endPort=t.port:(this._startPort="https:"===this._protocol?4370:4380,this._endPort="https:"===this._protocol?4379:4389),this._currentPort=this._startPort,this._runningPort=0,this._subdomain="",this._clientOpen=!1,this._connected=!1,this._backoffIndex=0,this.state=null,this._retryConnect=t.retryConnect||!1,this._reconnectOnLogout=t.reconnectOnLogout||!1,this._reopenOnReconnect=t.reopenOnReconnect||!1,this._localhost=t.debug||t.localhost||!1,this._pollClient=t.pollClient||!1,this._pollBackoff=t.pollBackoff||[1,1,1,1,3,3,5],this._longPollingTime=t.longPollingTime||6e4,this._token=t.token||"",void(this._referrer=t.referrer||this._win.location.href))}function o(t,e){function n(){}var i=e.prototype;n.prototype=t._super=i,n.prototype.constructor=e,t.prototype=new n}var r=t("tiny-emitter");o(i,r),e.exports=i,i.Promise=n.Promise;var s={STATUS_CHANGE:"STATUS_CHANGE",CONNECTION_ESTABLISHED:"CONNECTION_ESTABLISHED",CONNECTION_FAILED:"CONNECTION_FAILED"};i.Event=s;var u={INVALID_OAUTH_TOKEN:"4102",EXPIRED_OAUTH_TOKEN:"4103",INVALID_CSRF_TOKEN:"4107",OAUTH_TOKEN_INVALID_FOR_USER:"4108",NO_USER_LOGGED_IN:"4110",COULD_NOT_DETECT_PORT:"6000",COULD_NOT_OPEN_CLIENT:"6010",COULD_NOT_FETCH_CSRF_TOKEN:"6020",COULD_NOT_FETCH_STATUS:"6030",COULD_NOT_PLAY_TRACK:"6040",COULD_NOT_BROWSE_TO_CONTEXT:"6041",NO_TRACK_LOADED:"6050",CORS_REQUESTS_DISABLED:"6060",REQUEST_TIMED_OUT:"6061"};i.Error=u,i.prototype.isCurrent=function(t){return this.getCurrentTrackUri()===t},i.prototype.getCurrentTrackUri=function(){var t=this.state,e=null;return null!==t&&t.track&&t.track.track_resource&&t.track.track_resource.uri&&(e=t.track.track_resource.uri),e},i.prototype.enabled=function(){return this._runningPort>0},i.prototype._detectPort=function(t){if(t||(t={resolve:null,reject:null},t.promise=new i.Promise(function(e,n){t.resolve=e,t.reject=n})),0<this._runningPort)t.resolve(this._runningPort);else{var e=this,n=this._buildUrl("service/version.json",{service:"remote"});e._request(n,function(n,i){n?e._currentPort<e._endPort?(e._currentPort++,e._detectPort(t)):e._pollClient?(e._currentPort=e._startPort,setTimeout(function(){e._detectPort(t)},1e3*e._nextPollInterval())):t.reject({type:u.COULD_NOT_DETECT_PORT,message:"Could not detect any port"}):(e._resetBackoffCounter(),e._runningPort=e._currentPort,e._clientOpen=i.running!==!1,t.resolve(e._currentPort))})}return t.promise},i.prototype._openClient=function(){var t=this;return new i.Promise(function(e,n){if(t._clientOpen)e();else{var i=t._buildUrl("remote/open.json");t._request(i,function(i,o){i?n({type:u.COULD_NOT_OPEN_CLIENT,message:"Could not open client"}):o.running?(t._clientOpen=!0,e()):n({type:u.COULD_NOT_OPEN_CLIENT,message:"Could not open client"})},3e4)}})},i.prototype._csrfToken=function(){var t=this;return new i.Promise(function(e,n){if(""!==t._csrf)e(t._csrf);else{var i=t._buildUrl("simplecsrf/token.json");t._request(i,function(i,o){i?n({type:u.COULD_NOT_FETCH_CSRF_TOKEN,message:"Could not fetch csrf token"}):o.token?(t._csrf=o.token,e(o.token)):n({type:u.COULD_NOT_FETCH_CSRF_TOKEN,message:"Could not fetch csrf token"})})}})},i.prototype._status=function(t,e,n){var i=this,o={csrf:i._csrf,oauth:i._token};n=n||500,t&&(o.returnon="login,logout,play,pause,error,ap",o.returnafter=n/1e3);var r=i._buildUrl("remote/status.json",o);this._request(r,function(t,n){if(t){var o=t.type||u.COULD_NOT_FETCH_STATUS;e({type:o,message:"Could not fetch status"})}else n.error?(n.running===!1&&(i._clientOpen=!1),e(n.error)):e(null,n)},n+1e3)},i.prototype._statusChange=function(){var t=this;this._status(!0,function(e,n){if(e)switch(e.code=e.code||e.type,e.code){case u.NO_USER_LOGGED_IN:t._connected=!1,t._connection=null,t._reconnectOnLogout&&t._reconnect(),t.emit(s.CONNECTION_FAILED,e);break;case u.INVALID_OAUTH_TOKEN:case u.EXPIRED_OAUTH_TOKEN:case u.OAUTH_TOKEN_INVALID_FOR_USER:t._token="",t._connected=!1,t._connection=null,t.emit(s.CONNECTION_FAILED,e);break;case u.INVALID_CSRF_TOKEN:t._csrf="",t._csrfToken().then(function(){t._statusChange()});break;default:t._connected=!1,t._connection=null,t.emit(s.CONNECTION_FAILED,e)}else t._statusChange(),t.state=n,t.emit(s.STATUS_CHANGE,n)},t._longPollingTime)},i.prototype._connect=function(){var t=this;return new i.Promise(function(e,n){t._connected?e(t.state):t._status(!1,function(i,o){if(i)switch(i.type){case u.NO_USER_LOGGED_IN:t._retryConnect?setTimeout(function(){t._reconnect().then(function(t){e(t)})},1e3*t._nextPollInterval()):n(i);break;default:n(i)}else t._resetBackoffCounter(),t._connected=!0,t.state=o,t._statusChange(),e(o)})})},i.prototype.connect=function(){var t=this;return this._connection||(this._connection=this._delayedConnect.then(function(){return t._detectPort()}).then(function(){return new i.Promise(function(e,n){t._clientOpen?t._csrfToken().then(function(){return t._connect()},function(t){n(t)}).then(function(t){e(t)}):e(null)})})),this._connection.then(function(e){return t.state||e})},i.prototype._reconnect=function(){var t=this;return this._detectPort().then(function(){return t._reopenOnReconnect?t._openClient():t}).then(function(){return t._csrfToken()}).then(function(){return t._connect()})},i.prototype.setToken=function(t){this._token=t},i.prototype.play=function(t,e,n){var o=this,r=this._playPromise&&this._connection?this._playPromise:this.connect();return this._playPromise=r.then(function(){return o._openClient()}).then(function(){return o._csrfToken()}).then(function(){return o._connect()}).then(function(){var r={csrf:o._csrf,oauth:o._token,context:t};return r.uri=e||t,n&&(r.uri+="#"+o._formatPlayPosition(n)),new i.Promise(function(t,e){var n=o._buildUrl("remote/play.json",r);o._request(n,function(e,n){e?t():n.error?t():(o.state=n,o.emit(s.STATUS_CHANGE,n),t(n))})})})["catch"](function(t){throw o._playPromise=null,t})},i.prototype._pause=function(t){var e={csrf:this._csrf,oauth:this._token,pause:t===!0?"true":"false"},n=this._buildUrl("remote/pause.json",e);return new i.Promise(function(t,e){this._request(n,function(n,i){if(n){var o=n.type||u.COULD_NOT_TOGGLE_PLAYBACK;e({type:o,message:"Could not toggle playback"})}else i.error?e(i.error):t(i)})}.bind(this))},i.prototype.pause=function(){var t=this;return this.connect().then(function(e){return new i.Promise(function(n,i){e.track&&e.track.track_resource&&e.track.track_resource.uri?t._pause(!0).then(function(t){n(t)},function(t){i(t)}):i({type:u.NO_TRACK_LOADED,message:"Could not pause non existing track"})})})},i.prototype.resume=function(){var t=this;return this.connect().then(function(e){return new i.Promise(function(n,i){e.track&&e.track.track_resource&&e.track.track_resource.uri?t._pause(!1).then(function(t){n(t)},function(t){i(t)}):i({type:u.NO_TRACK_LOADED,message:"Could not pause non existing track"})})})},i.prototype.toggle=function(){var t=this;return this.connect().then(function(e){return new i.Promise(function(n,i){e.track&&e.track.track_resource&&e.track.track_resource.uri?t._pause(e.playing).then(function(t){n(t)}):i({type:u.NO_TRACK_LOADED,message:"Could not toggle playback for non existing track"})})})},i.prototype.browse=function(t,e){var n=this;return this.connect().then(function(){var o={csrf:n._csrf,oauth:n._token,context:t};return e&&(o.uri=e),new i.Promise(function(t,e){var i=n._buildUrl("remote/browse.json",o);n._request(i,function(n,i){n?e({type:u.COULD_NOT_BROWSE_TO_CONTEXT,message:"Could not browse to context"}):i.error?e(i.error):t(i)})})})["catch"](function(t){throw t})},i.prototype._baseUrl=function(){if(this._localhost)return"//localhost";var t=97,e=122;if(""===this._subdomain)for(var n=0;10>n;++n)this._subdomain+=String.fromCharCode(Math.floor(Math.random()*(e-t+1))+t);return"//"+this._subdomain+".spotilocal.com"},i.prototype._request=function(t,e,n){function i(){if("undefined"!=typeof o._win.XDomainRequest)return new o._win.XDomainRequest;if("undefined"!=typeof o._win.XMLHttpRequest)return new o._win.XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return null}var o=this,r=i();r?(r.onload=function(){var t=r.responseText;t=JSON.parse(t),e(null,t)},r.onerror=function(){e({type:r.status,message:"Request error"})},r.ontimeout=function(){e({type:u.REQUEST_TIMED_OUT,message:"Request timed out"})},r.onprogress=function(){},r.timeout=n?n:5e3,r.open("GET",t),r.send()):e({type:u.CORS_REQUESTS_DISABLED,message:"CORS Requests are not enabled"})},i.prototype._buildUrl=function(t,e){e=e||{},e.cors="",e.ref=e.ref||this._referrer;var n=this._buildQuery(e);return this._baseUrl()+":"+this._currentPort+"/"+t+"?"+n},i.prototype._buildQuery=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},i.prototype._nextPollInterval=function(){var t=this._pollBackoff[this._backoffIndex];return this._pollBackoff[this._backoffIndex+1]&&this._backoffIndex++,t},i.prototype._resetBackoffCounter=function(){this._backoffIndex=0},i.prototype._formatPlayPosition=function(t){var e=Math.floor(t/60),n=(t%60).toFixed(3);return 10>n&&(n="0"+n),e+":"+n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"tiny-emitter":27}],27:[function(t,e,n){function i(){}i.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){o.off(t,i),e.apply(n,arguments)}var o=this;return i._=e,this.on(t,i,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,o=n.length;for(i;o>i;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],o=[];if(i&&e)for(var r=0,s=i.length;s>r;r++)i[r].fn!==e&&i[r].fn._!==e&&o.push(i[r]);return o.length?n[t]=o:delete n[t],this}},e.exports=i},{}]},{},[9]);

    </script></body></html>

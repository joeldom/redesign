Cleaning up the code

 * Single var pattern
 * Separated axis updates from bar updates

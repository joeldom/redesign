Modifying when() to accept a 'this' argument

Inspired by [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)
